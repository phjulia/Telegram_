{"version":3,"sources":["../../../.tmp-es/components/combobox/combobox.jsx"],"names":["React","PropTypes","assign","find","reject","isEqual","findIndex","isFunction","classNames","shortid","Button","Dialog","InnerInput","InputIcon","Menu","Label","Popover","SelectedListBox","FieldLevelHelpTooltip","KEYS","KeyBuffer","keyLetterMenuItemSelect","mapKeyEventCallbacks","menuItemSelectScroll","checkProps","COMBOBOX","componentDoc","IconSettingsContext","currentOpenDropdown","documentDefined","document","propTypes","assistiveText","shape","label","string","loadingMenuItems","optionSelectedInMenu","popoverLabel","removeSingleSelectedOption","removePill","selectedListboxLabel","className","oneOfType","array","object","classNameContainer","classNameMenu","classNameMenuSubHeader","events","onBlur","func","onChange","onClose","onFocus","onOpen","onRequestClose","onRequestOpen","onRequestRemoveSelectedOption","onSelect","onSubmit","errorText","fieldLevelHelpTooltip","node","hasDeselect","bool","hasInputSpinner","hasMenuSpinner","hasStaticAlignment","id","input","labels","deselectOption","multipleOptionsSelected","noOptionsFound","placeholder","placeholderReadOnly","removePillTitle","isOpen","inheritWidthOf","oneOf","onRenderMenuItem","inputRef","menuPosition","menuMaxWidth","multiple","options","arrayOf","isRequired","icon","subTitle","title","type","disabled","tooltipContent","menuItemVisibleLength","predefinedOptionsOnly","popover","required","selection","selectedListboxRef","singleInputDisabled","tooltipMenuItemDisabled","element","value","defaultValue","optionsAddItem","optionsSearchEntity","entityCombobox","variant","defaultProps","cancelButton","doneButton","optionDisabledTooltipLabel","Combobox","props","body","popoverBody","getId","popoverFooter","e","handleClose","trigger","defaultPopoverProps","ariaLabelledby","align","footer","footerClassName","hasNoNubbin","state","hasNoTriggerStyles","handleOpen","popoverProps","children","generatedId","activeOption","activeOptionIndex","offset","nextIndex","skipIndex","length","newIndex","hasNewIndex","localProps","deselectId","localOptionsSearchEntity","map","entity","localOptionsAddItem","component","inputRendered","setState","ref","listboxHasFocus","event","handleRequestClose","getIsOpen","undefined","setTimeout","activeElement","tagName","focus","requestOpenMenu","target","onClick","getIsActiveOption","handleSelect","option","callbacks","DOWN","callback","handleKeyDownDown","ENTER","handleInputSubmit","ESCAPE","UP","handleKeyDownUp","TAB","handleKeyDownTab","other","handleKeyDownOther","stopPropagation","shiftKey","openDialog","handleNavigateListboxMenu","direction","key","keyBuffer","menuKeyBuffer","keyCode","getOptions","container","menuRef","focusedIndex","offsets","next","previous","prevState","getNewActiveOptionIndex","isLastOptionAndRightIsPressed","activeSelectedOptionIndex","isFirstOptionAndLeftIsPressed","newState","activeSelectedOption","data","item","index","preventDefault","onlyOnePillAndInputExists","isReadOnlyAndTwoPillsExists","lastPillWasRemoved","activeSelectedOptionRef","newSelection","isSelected","singleSelectAndSelectedWasNotClicked","multiSelectAndSelectedWasNotClicked","deselectWasClicked","isInlineSingleSelectionAndIsNotSelected","userDefinedProps","getErrorId","role","inputIconTitle","handleInputFocus","handleInputBlur","handleKeyDown","setInputRef","handleInputChange","getDialog","menuRenderer","renderMenu","onBlurPill","handleBlurPill","onPillFocus","handlePillFocus","onRequestFocus","handleRequestFocusSelectedListbox","onRequestFocusOnNextPill","handleNavigateSelectedListbox","onRequestFocusOnPreviousPill","onRequestRemove","handleRemoveSelectedOption","setSelectedListboxRef","iconLeft","cloneElement","containerClassName","buttonRef","menuVariant","base","readonly","readonlyItemVisibleLength","clearActiveOption","menuItem","getCustomPopoverProps","activeOptionLabel","selectedOptionLabel","inputValue","generate","generatedErrorId","nextProps","selectedOptionsRenderIsInitialRender","isInline","context","getTargetElement","hasRenderedLabel","subRenderParameters","multipleOrSingle","subRenders","renderBase","single","renderInlineMultiple","renderInlineSingle","renderPopover","renderReadOnlyMultiple","renderReadOnlySingle","variantExists","mainCombobox","Component","contextType","displayName"],"mappings":"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","sourcesContent":["/* eslint-disable max-lines */\n/* Copyright (c) 2015-present, salesforce.com, inc. All rights reserved */\n/* Licensed under BSD 3-Clause - see LICENSE.txt or git.io/sfdc-license */\n\n/* eslint-disable max-lines */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport assign from 'lodash.assign';\nimport find from 'lodash.find';\nimport reject from 'lodash.reject';\nimport isEqual from 'lodash.isequal';\nimport findIndex from 'lodash.findindex';\nimport isFunction from 'lodash.isfunction';\n\nimport classNames from 'classnames';\n\nimport shortid from 'shortid';\n\nimport Button from '../button';\nimport Dialog from '../utilities/dialog';\nimport InnerInput from '../../components/input/private/inner-input';\nimport InputIcon from '../icon/input-icon';\nimport Menu from './private/menu';\nimport Label from '../forms/private/label';\nimport Popover from '../popover';\nimport SelectedListBox from '../pill-container/private/selected-listbox';\n\nimport FieldLevelHelpTooltip from '../tooltip/private/field-level-help-tooltip';\nimport KEYS from '../../utilities/key-code';\nimport KeyBuffer from '../../utilities/key-buffer';\nimport keyLetterMenuItemSelect from '../../utilities/key-letter-menu-item-select';\nimport mapKeyEventCallbacks from '../../utilities/key-callbacks';\nimport menuItemSelectScroll from '../../utilities/menu-item-select-scroll';\n\nimport checkProps from './check-props';\n\nimport { COMBOBOX } from '../../utilities/constants';\nimport componentDoc from './component.json';\nimport { IconSettingsContext } from '../icon-settings';\n\nlet currentOpenDropdown;\nconst documentDefined = typeof document !== 'undefined';\n\nconst propTypes = {\n\t/**\n\t * **Assistive text for accessibility**\n\t * This object is merged with the default props object on every render.\n\t * * `label`: This is used as a visually hidden label if, no `labels.label` is provided.\n\t * * `loading`: Text added to loading spinner.\n\t * * `optionSelectedInMenu`: Added before selected menu items in Read-only variants (Picklists). The default is `Current Selection:`.\n\t * * `popoverLabel`: Used by popover variant, assistive text for the Popover aria-label.\n\t * * `removeSingleSelectedOption`: Used by inline-listbox, single-select variant to remove the selected item (pill). This is a button with focus. The default is `Remove selected option`.\n\t * * `removePill`: Used by multiple selection Comboboxes to remove a selected item (pill). Focus is on the pill. This is not a button. The default  is `, Press delete or backspace to remove`.\n\t * * `selectedListboxLabel`: This is a label for the selected listbox. The grouping of pills for multiple selection Comboboxes. The default is `Selected Options:`.\n\t * _Tested with snapshot testing._\n\t */\n\tassistiveText: PropTypes.shape({\n\t\tlabel: PropTypes.string,\n\t\tloadingMenuItems: PropTypes.string,\n\t\toptionSelectedInMenu: PropTypes.string,\n\t\tpopoverLabel: PropTypes.string,\n\t\tremoveSingleSelectedOption: PropTypes.string,\n\t\tremovePill: PropTypes.string,\n\t\tselectedListboxLabel: PropTypes.string,\n\t}),\n\t/**\n\t * The `aria-describedby` attribute is used to indicate the IDs of the elements that describe the object. It is used to establish a relationship between widgets or groups and text that described them.\n\t * This is very similar to aria-labelledby: a label describes the essence of an object, while a description provides more information that the user might need. _Tested with snapshot testing._\n\t */\n\t'aria-describedby': PropTypes.string,\n\t/**\n\t * CSS classes to be added to tag with `.slds-combobox`. Uses `classNames` [API](https://github.com/JedWatson/classnames). _Tested with snapshot testing._\n\t */\n\tclassName: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.object,\n\t\tPropTypes.string,\n\t]),\n\t/**\n\t * CSS classes to be added to top level tag with `.slds-form-element` and not on `.slds-combobox_container`. Uses `classNames` [API](https://github.com/JedWatson/classnames). _Tested with snapshot testing._\n\t */\n\tclassNameContainer: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.object,\n\t\tPropTypes.string,\n\t]),\n\t/**\n\t * CSS classes to be added to tag with `.slds-dropdown`. Uses `classNames` [API](https://github.com/JedWatson/classnames). Autocomplete/bass variant menu height should not scroll and should be determined by number items which should be no more than 10. _Tested with snapshot testing._\n\t */\n\tclassNameMenu: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.object,\n\t\tPropTypes.string,\n\t]),\n\t/**\n\t * CSS classes to be added to tag with `.slds-dropdown__header`. Uses `classNames` [API](https://github.com/JedWatson/classnames).\n\t */\n\tclassNameMenuSubHeader: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.object,\n\t\tPropTypes.string,\n\t]),\n\t/**\n\t * Event Callbacks\n\t * * `onBlur`: Called when `input` removes focus.\n\t * * `onChange`: Called when keyboard events occur within `input`\n\t * * `onClose`: Triggered when the menu has closed.\n\t * * `onFocus`: Called when `input` receives focus.\n\t * * `onOpen`: Triggered when the menu has opened.\n\t * * `onRequestClose`: Function called when the menu would like to hide. Please use with `isOpen`.\n\t * * `onRequestOpen`:  Function called when the menu would like to show. Please use with `isOpen`.\n\t * * `onRequestRemoveSelectedOption`: Function called when a single selection option is to be removed.\n\t * * `onSelect`: Function called when a menu item is selected. This includes header and footer items.\n\t * * `onSubmit`: Function called when user presses enter or submits the `input`\n\t * _Tested with Mocha testing._\n\t */\n\tevents: PropTypes.shape({\n\t\tonBlur: PropTypes.func,\n\t\tonChange: PropTypes.func,\n\t\tonClose: PropTypes.func,\n\t\tonFocus: PropTypes.func,\n\t\tonOpen: PropTypes.func,\n\t\tonRequestClose: PropTypes.func,\n\t\tonRequestOpen: PropTypes.func,\n\t\tonRequestRemoveSelectedOption: PropTypes.func,\n\t\tonSelect: PropTypes.func,\n\t\tonSubmit: PropTypes.func,\n\t}),\n\t/**\n\t * Message to display when the input is in an error state. When this is present, also visually highlights the component as in error. _Tested with snapshot testing._\n\t */\n\terrorText: PropTypes.string,\n\t/**\n\t * A [Tooltip](https://react.lightningdesignsystem.com/components/tooltips/) component that is displayed next to the `labels.label`. The props from the component will be merged and override any default props.\n\t */\n\tfieldLevelHelpTooltip: PropTypes.node,\n\t/**\n\t * If true, `{ label: 'None': value: '' }` will be selected.\n\t */\n\thasDeselect: PropTypes.bool,\n\t/**\n\t * If true, loading spinner appears inside input on right hand side.\n\t */\n\thasInputSpinner: PropTypes.bool,\n\t/**\n\t * Add loading spinner below the options\n\t */\n\thasMenuSpinner: PropTypes.bool,\n\t/**\n\t * By default, dialogs will flip their alignment (such as bottom to top) if they extend beyond a boundary element such as a scrolling parent or a window/viewpoint. `hasStaticAlignment` disables this behavior and allows this component to extend beyond boundary elements. _Not tested._\n\t */\n\thasStaticAlignment: PropTypes.bool,\n\t/**\n\t * HTML id for component. _Tested with snapshot testing._\n\t */\n\tid: PropTypes.string,\n\t/**\n\t * An [Input](https://react.lightningdesignsystem.com/components/inputs) component.\n\t * The props from this component will override any default props.\n\t */\n\tinput: PropTypes.node,\n\t/**\n\t * **Text labels for internationalization**\n\t * This object is merged with the default props object on every render.\n\t * * `deselectOption`: This label appears first in the menu items of a read-only, Picklist-like Combobox. Selecting it, deselects any currently selected value.\n\t * * `label`: This label appears above the input.\n\t * * `cancelButton`: This label is only used by the dialog variant for the cancel button in the footer of the dialog. The default is `Cancel`\n\t * * `doneButton`: This label is only used by the dialog variant for the done button in the footer of the dialog. The default is `Done`\n\t * * `multipleOptionsSelected`: This label is used by the readonly variant when multiple options are selected. The default is `${props.selection.length} options selected`. This will override the entire string.\n\t * * `noOptionsFound`: Custom message that renders when no matches found. The default empty state is just text that says, 'No matches found.'.\n\t * * `placeholder`: Input placeholder\n\t * * `placeholderReadOnly`: Placeholder for Picklist-like Combobox\n\t * * `removePillTitle`: Title on `X` icon\n\t * _Tested with snapshot testing._\n\t */\n\tlabels: PropTypes.shape({\n\t\tdeselectOption: PropTypes.string,\n\t\tlabel: PropTypes.oneOfType([PropTypes.node, PropTypes.string]),\n\t\tmultipleOptionsSelected: PropTypes.string,\n\t\tnoOptionsFound: PropTypes.oneOfType([PropTypes.node, PropTypes.string]),\n\t\tplaceholder: PropTypes.string,\n\t\tplaceholderReadOnly: PropTypes.string,\n\t\tremovePillTitle: PropTypes.string,\n\t}),\n\t/**\n\t * Forces the dropdown to be open or closed. See controlled/uncontrolled callback/prop pattern for more on suggested use view [Concepts and Best Practices](https://github.com/salesforce-ux/design-system-react/blob/master/CONTRIBUTING.md#concepts-and-best-practices) _Tested with snapshot testing._\n\t */\n\tisOpen: PropTypes.bool,\n\t/**\n\t * Sets the dialog width to the width of one of the following:\n\t * * `target`: Sets the dialog width to the width of the target. (Menus attached to `input` typically follow this UX pattern),\n\t * * `menu`: Consider setting a `menuMaxWidth` if using this value. If not, width will be set to width of largest menu item.\n\t * * `none`: Does not set a width on the dialog. _Tested with snapshot testing._\n\t */\n\tinheritWidthOf: PropTypes.oneOf(['target', 'menu', 'none']),\n\t/**\n\t * Accepts a custom menu item rendering function that becomes a custom component. It should return a React node. The checkmark is still rendered in readonly variants. This function is passed the following props:\n\t * * `assistiveText`: Object, `assistiveText` prop that is passed into Combobox\n\t * * `option`: Object, option data for item being rendered that is passed into Combobox\n\t * * `selected`: Boolean, allows rendering of `assistiveText.optionSelectedInMenu` in Readonly Combobox\n\t *\n\t * _Tested with snapshot testing._\n\t */\n\tonRenderMenuItem: PropTypes.func,\n\t/**\n\t * This callback exposes the input reference / DOM node to parent components.\n\t */\n\tinputRef: PropTypes.func,\n\t/**\n\t * Please select one of the following:\n\t * * `absolute` - (default) The dialog will use `position: absolute` and style attributes to position itself. This allows inverted placement or flipping of the dialog.\n\t * * `overflowBoundaryElement` - The dialog will overflow scrolling parents. Use on elements that are aligned to the left or right of their target and don't care about the target being within a scrolling parent. Typically this is a popover or tooltip. Dropdown menus can usually open up and down if no room exists. In order to achieve this a portal element will be created and attached to `body`. This element will render into that detached render tree.\n\t * * `relative` - No styling or portals will be used. Menus will be positioned relative to their triggers. This is a great choice for HTML snapshot testing.\n\t */\n\tmenuPosition: PropTypes.oneOf([\n\t\t'absolute',\n\t\t'overflowBoundaryElement',\n\t\t'relative',\n\t]),\n\t/**\n\t * Sets a maximum width that the menu will be used if `inheritWidthOf` is set to `menu`. (Example: 500px) _Tested with snapshot testing._\n\t *\n\t */\n\tmenuMaxWidth: PropTypes.string,\n\t/**\n\t * Allows multiple selections _Tested with mocha testing._\n\t */\n\tmultiple: PropTypes.bool,\n\t/**\n\t * **Array of item objects in the dropdown menu.**\n\t * Each object can contain:\n\t * * `icon`: An `Icon` component. (not used in read-only variant)\n\t * * `id`: A unique identifier string.\n\t * * `label`: A primary string of text for a menu item or group separator.\n\t * * `subTitle`: A secondary string of text added for clarity. (optional)\n\t * * `title`: A string of text shown as the title of the selected item (optional)\n\t * * `type`: 'separator' is the only type currently used\n\t * * `disabled`: Set to true to disable this menu item.\n\t * * `tooltipContent`: Content that is displayed in tooltip when item is disabled\n\t * ```\n\t * {\n\t * \tid: '2',\n\t * \tlabel: 'Salesforce.com, Inc.',\n\t * \tsubTitle: 'Account  San Francisco',\n\t * \ttitle: 'Salesforce',\n\t * \ttype: 'account',\n\t *  disabled: true,\n\t *  tooltipContent: \"You don't have permission to select this item.\"\n\t * },\n\t * ```\n\t * Note: At the moment, Combobox does not support two consecutive separators. _Tested with snapshot testing._\n\t */\n\toptions: PropTypes.arrayOf(\n\t\tPropTypes.PropTypes.shape({\n\t\t\tid: PropTypes.string.isRequired,\n\t\t\ticon: PropTypes.node,\n\t\t\tlabel: PropTypes.string,\n\t\t\tsubTitle: PropTypes.string,\n\t\t\ttitle: PropTypes.string,\n\t\t\ttype: PropTypes.string,\n\t\t\tdisabled: PropTypes.bool,\n\t\t\ttooltipContent: PropTypes.node,\n\t\t})\n\t),\n\t/**\n\t * Determines the height of the menu based on SLDS CSS classes. This is a `number`. The default for a `readonly` variant is `5`.\n\t */\n\tmenuItemVisibleLength: PropTypes.oneOf([5, 7, 10]),\n\t/**\n\t * Limits auto-complete input submission to one of the provided options. _Tested with mocha testing._\n\t */\n\tpredefinedOptionsOnly: PropTypes.bool,\n\t/**\n\t * A `Popover` component. The props from this popover will be merged and override any default props. This also allows a Combobox's Popover dialog to be a controlled component. _Tested with snapshot testing._\n\t */\n\tpopover: PropTypes.node,\n\t/**\n\t * Applies label styling for a required form element. _Tested with snapshot testing._\n\t */\n\trequired: PropTypes.bool,\n\t/**\n\t * Accepts an array of item objects. For single selection, pass in an array of one object. For item object keys, see `options` prop. _Tested with snapshot testing._\n\t */\n\tselection: PropTypes.arrayOf(\n\t\tPropTypes.PropTypes.shape({\n\t\t\tid: PropTypes.string.isRequired,\n\t\t\ticon: PropTypes.node,\n\t\t\tlabel: PropTypes.string,\n\t\t\tsubTitle: PropTypes.string,\n\t\t\ttype: PropTypes.string,\n\t\t})\n\t).isRequired,\n\t/**\n\t * This callback exposes the selected listbox reference / DOM node to parent components.\n\t */\n\tselectedListboxRef: PropTypes.func,\n\t/**\n\t * Disables the input and prevents editing the contents. This only applies for single readonly and inline-listbox variants.\n\t */\n\tsingleInputDisabled: PropTypes.bool,\n\t/**\n\t * Accepts a tooltip that is displayed when hovering on disabled menu items.\n\t */\n\ttooltipMenuItemDisabled: PropTypes.element,\n\t/**\n\t * Value of input. _This is a controlled component,_ so you will need to control the input value by passing the `value` from `onChange` to a parent component or state manager, and then pass it back into the componet with this prop. Please see examples for more clarification. _Tested with snapshot testing._\n\t */\n\tvalue: PropTypes.string,\n\t/**\n\t * Changes styles of the input and menu. Currently `entity` is not supported.\n\t * The options are:\n\t * * `base`: An autocomplete Combobox also allows a user to select an option from a list, but that list can be affected by what the user types into the input of the Combobox. The SLDS website used to call the autocomplete Combobox its `base` variant.\n\t * * `inline-listbox`: An Entity Autocomplete Combobox or Lookup, is used to search for and select Salesforce Entities.\n\t * * `popover`: A dialog Combobox is best used when a listbox, tree, grid, or tree-grid is not the best solution. This variant allows custom content.\n\t * * `readonly`: A readonly text input that allows a user to select an option from a pre-defined list of options. It does not allow free form user input, nor does it allow the user to modify the selected value.\n\t *\n\t *  _Tested with snapshot testing._\n\t */\n\t/**\n\t * Default value of input. Provide uncontroled behaviour\n\t */\n\tdefaultValue: PropTypes.string,\n\t/**\n\t * **Array of item objects in the dropdown menu that is displayed below the list of `options`. `onSelect` fires when selected.**\n\t * Each object can contain:\n\t * * `id`: A unique identifier string.\n\t * * `icon`: An [Icon](/components/icons/) component to be displayed to the left of the menu item `label`.\n\t * * `label`: A primary string of text for a menu item or a function that receives `inputValue` as function parameter and returns text to be displayed in for a menu item.\n\t * ```\n\t * {\n\t * \tid: '1',\n\t * \ticon: (\n\t *  \t<Icon\n\t * \t\t\tassistiveText={{ label: 'add' }}\n\t * \t\t\tcategory=\"utility\"\n\t * \t\t\tsize=\"x-small\"\n\t * \t\t\tname=\"add\"\n\t * \t\t/>\n\t * \t),\n\t * \tlabel: 'New Entity'\n\t * }\n\t * ```\n\t * _Tested with snapshot testing._\n\t */\n\toptionsAddItem: PropTypes.arrayOf(\n\t\tPropTypes.shape({\n\t\t\tid: PropTypes.string,\n\t\t\ticon: PropTypes.node,\n\t\t\tlabel: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n\t\t})\n\t),\n\t/**\n\t * **Array of item objects in the dropdown menu that is displayed above the list of `options`. `onSelect` fires when selected. **\n\t * Each object can contain:\n\t * * `id`: A unique identifier string.\n\t * * `icon`: An [Icon](/components/icons/) component to be displayed to the left of the menu item `label`.\n\t * * `label`: A primary string of text for a menu item or a function that receives `inputValue` as function parameter and returns text to be displayed in for a menu item.\n\t * ```\n\t * {\n\t *\tid: '1',\n\t *\ticon: (\n\t *\t\t<Icon\n\t *\t\t\tassistiveText={{ label: 'Add in Accounts' }}\n\t *\t\t\tsize=\"x-small\"\n\t *\t\t\tcategory=\"utility\"\n\t *\t\t\tname=\"search\"\n\t *\t\t/>\n\t *\t),\n\t *\tlabel: (searchTerm) => {\n\t *\t\treturn `${searchTerm} in Accounts`;\n\t *\t},\n\t * }\n\t * ```\n\t * _Tested with snapshot testing._\n\t */\n\toptionsSearchEntity: PropTypes.arrayOf(\n\t\tPropTypes.shape({\n\t\t\tid: PropTypes.string,\n\t\t\ticon: PropTypes.node,\n\t\t\tlabel: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n\t\t})\n\t),\n\t/**\n\t * Node of type [Combobox](/components/comboboxes/) for creating grouped comboboxes.\n\t */\n\tentityCombobox: PropTypes.node,\n\t/**\n\t * Defines Combobox variant styling and functionality\n\t */\n\tvariant: PropTypes.oneOf(['base', 'inline-listbox', 'popover', 'readonly']),\n};\n\nconst defaultProps = {\n\tassistiveText: {\n\t\tloadingMenuItems: 'Loading',\n\t\toptionSelectedInMenu: 'Current Selection:',\n\t\tremoveSingleSelectedOption: 'Remove selected option',\n\t\tremovePill: ', Press delete or backspace to remove',\n\t\tselectedListboxLabel: 'Selected Options:',\n\t},\n\tdeselectOption: false,\n\tevents: {},\n\tlabels: {\n\t\tdeselectOption: 'None',\n\t\tcancelButton: 'Cancel',\n\t\tdoneButton: `Done`,\n\t\tnoOptionsFound: 'No matches found.',\n\t\toptionDisabledTooltipLabel: 'This option is disabled.',\n\t\tplaceholderReadOnly: 'Select an Option',\n\t\tremovePillTitle: 'Remove',\n\t},\n\tinheritWidthOf: 'target',\n\tmenuPosition: 'absolute',\n\toptionsSearchEntity: [],\n\toptionsAddItem: [],\n\trequired: false,\n\tselection: [],\n\tsingleInputDisabled: false,\n\tvariant: 'base',\n};\n\n/**\n * A widget that provides a user with an input field that is either an autocomplete or readonly, accompanied with a listbox of pre-definfined options.\n */\nclass Combobox extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tactiveOption: undefined,\n\t\t\tactiveOptionIndex: -1,\n\t\t\t// seeding initial state with this.props.selection[0]\n\t\t\tactiveSelectedOption:\n\t\t\t\t(this.props.selection && this.props.selection[0]) || undefined,\n\t\t\tactiveSelectedOptionIndex: 0,\n\t\t\tlistboxHasFocus: false,\n\t\t\tisOpen: typeof props.isOpen === 'boolean' ? props.isOpen : false,\n\t\t};\n\n\t\tthis.menuKeyBuffer = new KeyBuffer();\n\t\tthis.menuRef = undefined;\n\t\tthis.selectedListboxRef = null;\n\n\t\t// `checkProps` issues warnings to developers about properties (similar to React's built in development tools)\n\t\tcheckProps(COMBOBOX, props, componentDoc);\n\n\t\tthis.generatedId = shortid.generate();\n\t\tthis.generatedErrorId = shortid.generate();\n\t\tthis.deselectId = `${this.getId()}-deselect`;\n\t}\n\n\t/**\n\t * Lifecycle methods\n\t */\n\n\tcomponentDidUpdate(nextProps) {\n\t\t// This logic will maintain the active highlight even when the\n\t\t// option order changes. One example would be the server pushes\n\t\t// data out as the user has the menu open. This logic clears\n\t\t// `activeOption` if the active option is no longer in the options\n\t\t// list. If it's in the options list, then find the new index and\n\t\t// set `activeOptionIndex`\n\t\tif (!isEqual(this.getOptions(), this.getOptions(nextProps))) {\n\t\t\tconst index = findIndex(this.getOptions(nextProps), (item) =>\n\t\t\t\tisEqual(item, this.state.activeOption)\n\t\t\t);\n\t\t\tif (index !== -1) {\n\t\t\t\t// eslint-disable-next-line react/no-did-update-set-state\n\t\t\t\tthis.setState({ activeOptionIndex: index });\n\t\t\t} else {\n\t\t\t\t// eslint-disable-next-line react/no-did-update-set-state\n\t\t\t\tthis.setState({ activeOption: undefined, activeOptionIndex: -1 });\n\t\t\t}\n\t\t} else if (this.props.isOpen !== nextProps.isOpen) {\n\t\t\t// eslint-disable-next-line react/no-did-update-set-state\n\t\t\tthis.setState({\n\t\t\t\tactiveOption: undefined,\n\t\t\t\tactiveOptionIndex: -1,\n\t\t\t\tisOpen: nextProps.isOpen,\n\t\t\t});\n\t\t}\n\n\t\t// there may be issues with tabindex/focus if the app removes an item\n\t\t// from selection while the user is using the listbox\n\t\tconst selectedOptionsRenderIsInitialRender =\n\t\t\tthis.props.selection &&\n\t\t\tthis.props.selection.length === 0 &&\n\t\t\tnextProps.selection.length > 0;\n\t\tif (selectedOptionsRenderIsInitialRender) {\n\t\t\t// eslint-disable-next-line react/no-did-update-set-state\n\t\t\tthis.setState({\n\t\t\t\tactiveSelectedOption: nextProps.selection[0],\n\t\t\t\tactiveSelectedOptionIndex: 0,\n\t\t\t});\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tif (currentOpenDropdown === this) {\n\t\t\tcurrentOpenDropdown = undefined;\n\t\t}\n\t}\n\n\tgetCustomPopoverProps = (body, { assistiveText, labels }) => {\n\t\t/*\n\t\t * Generate the popover props based on passed in popover props. Using the default behavior if not provided by passed in popover\n\t\t */\n\t\tconst popoverBody = (\n\t\t\t<div>\n\t\t\t\t<div className=\"slds-assistive-text\" id={`${this.getId()}-label`}>\n\t\t\t\t\t{assistiveText.popoverLabel}\n\t\t\t\t</div>\n\t\t\t\t{body}\n\t\t\t</div>\n\t\t);\n\n\t\tconst popoverFooter = (\n\t\t\t<div>\n\t\t\t\t<Button\n\t\t\t\t\tlabel={labels.cancelButton}\n\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\tthis.handleClose(e, { trigger: 'cancel' });\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<Button\n\t\t\t\t\tlabel={labels.doneButton}\n\t\t\t\t\tvariant=\"brand\"\n\t\t\t\t\tonClick={this.handleClose}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\n\t\tconst defaultPopoverProps = {\n\t\t\tariaLabelledby: `${this.getId()}-label`,\n\t\t\talign: 'bottom',\n\t\t\tbody: popoverBody,\n\t\t\tclassName: 'slds-popover_full-width',\n\t\t\tfooter: popoverFooter,\n\t\t\tfooterClassName: 'slds-popover__footer_form',\n\t\t\thasNoNubbin: true,\n\t\t\tid: this.getId(),\n\t\t\tisOpen: this.state.isOpen,\n\t\t\thasNoTriggerStyles: true,\n\t\t\tonOpen: this.handleOpen,\n\t\t\tonClose: this.handleClose,\n\t\t\tonRequestClose: this.handleClose,\n\t\t};\n\n\t\t/* Merge in passed popover's props if there is any to override the default popover props */\n\t\tconst popoverProps = assign(\n\t\t\tdefaultPopoverProps,\n\t\t\tthis.props.popover ? this.props.popover.props : {}\n\t\t);\n\t\tpopoverProps.body = popoverBody;\n\n\t\t// eslint-disable-next-line fp/no-delete\n\t\tdelete popoverProps.children;\n\t\treturn popoverProps;\n\t};\n\n\tgetDialog({ menuRenderer }) {\n\t\t// FOR BACKWARDS COMPATIBILITY\n\t\tconst menuPosition = this.props.isInline\n\t\t\t? 'relative'\n\t\t\t: this.props.menuPosition; // eslint-disable-line react/prop-types\n\n\t\treturn !this.props.disabled && this.getIsOpen() ? (\n\t\t\t<Dialog\n\t\t\t\talign=\"bottom left\"\n\t\t\t\tcontext={this.context}\n\t\t\t\thasStaticAlignment={this.props.hasStaticAlignment}\n\t\t\t\tinheritWidthOf={this.props.inheritWidthOf}\n\t\t\t\tonClose={this.handleClose}\n\t\t\t\tonMouseDown={(event) => {\n\t\t\t\t\t// prevent onBlur\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}}\n\t\t\t\tonOpen={this.handleOpen}\n\t\t\t\tonRequestTargetElement={this.getTargetElement}\n\t\t\t\tposition={menuPosition}\n\t\t\t\tcontainerProps={{\n\t\t\t\t\tid: `${this.getId()}-listbox`,\n\t\t\t\t\trole: 'listbox',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{menuRenderer}\n\t\t\t</Dialog>\n\t\t) : null;\n\t}\n\n\tgetErrorId() {\n\t\treturn (\n\t\t\tthis.props['aria-describedby'] ||\n\t\t\t(this.props.errorText && this.generatedErrorId)\n\t\t);\n\t}\n\n\t/**\n\t * Shared class property getter methods\n\t */\n\n\tgetId = () => this.props.id || this.generatedId;\n\n\tgetIsActiveOption = () =>\n\t\tthis.state.activeOption && this.state.activeOptionIndex !== -1;\n\n\tgetIsOpen = () =>\n\t\t!!(typeof this.props.isOpen === 'boolean'\n\t\t\t? this.props.isOpen\n\t\t\t: this.state.isOpen);\n\n\tgetNewActiveOptionIndex = ({ activeOptionIndex, offset, options }) => {\n\t\t// used by menu listbox and selected options listbox\n\t\tconst nextIndex = activeOptionIndex + offset;\n\t\tconst skipIndex =\n\t\t\toptions.length > nextIndex &&\n\t\t\tnextIndex >= 0 &&\n\t\t\toptions[nextIndex].type === 'separator';\n\t\tconst newIndex = skipIndex ? nextIndex + offset : nextIndex;\n\t\tconst hasNewIndex = options.length > nextIndex && nextIndex >= 0;\n\t\treturn hasNewIndex ? newIndex : activeOptionIndex;\n\t};\n\n\tgetOptions = (props = this.props) => {\n\t\tconst localProps = props;\n\t\tconst labels = assign({}, defaultProps.labels, this.props.labels);\n\n\t\tconst deselectOption = {\n\t\t\tid: this.deselectId,\n\t\t\tlabel: labels.deselectOption,\n\t\t\tvalue: '',\n\t\t\ttype: 'deselect',\n\t\t};\n\n\t\tconst localOptionsSearchEntity = localProps.optionsSearchEntity.map(\n\t\t\t(entity) => ({ ...entity, type: 'header' })\n\t\t);\n\n\t\tconst localOptionsAddItem = props.optionsAddItem.map((entity) => ({\n\t\t\t...entity,\n\t\t\ttype: 'footer',\n\t\t}));\n\n\t\tconst options = [\n\t\t\t...(localOptionsSearchEntity.length > 0 ? localOptionsSearchEntity : []),\n\t\t\t...(props.hasDeselect ? [deselectOption] : []),\n\t\t\t...(localProps.options && localProps.options.length > 0\n\t\t\t\t? localProps.options\n\t\t\t\t: []),\n\t\t\t...(localOptionsAddItem.length > 0 ? localOptionsAddItem : []),\n\t\t];\n\t\treturn options;\n\t};\n\n\tgetTargetElement = () => this.inputRef;\n\n\tsetInputRef = (component) => {\n\t\tthis.inputRef = component;\n\t\t// yes, this is a render triggered by a render.\n\t\t// Dialog/Popper.js cannot place the menu until\n\t\t// the trigger/target DOM node is mounted. This\n\t\t// way `findDOMNode` is not called and parent\n\t\t// DOM nodes are not queried.\n\t\tif (!this.state.inputRendered) {\n\t\t\tthis.setState({ inputRendered: true });\n\t\t}\n\t\tif (this.props.inputRef) {\n\t\t\tthis.props.inputRef(component);\n\t\t}\n\t};\n\n\tsetSelectedListboxRef = (ref) => {\n\t\tthis.selectedListboxRef = ref;\n\t\tif (this.props.selectedListboxRef) {\n\t\t\tthis.props.selectedListboxRef(ref);\n\t\t}\n\t};\n\n\thandleBlurPill = () => {\n\t\tthis.setState({ listboxHasFocus: false });\n\t};\n\n\t/**\n\t * Menu open/close and sub-render methods\n\t */\n\thandleClickOutside = (event) => {\n\t\tthis.handleRequestClose(event, {});\n\t};\n\n\thandleClose = (event, { trigger } = {}) => {\n\t\tconst isOpen = this.getIsOpen();\n\n\t\tif (isOpen) {\n\t\t\tif (currentOpenDropdown === this) {\n\t\t\t\tcurrentOpenDropdown = undefined;\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\tactiveOption: undefined,\n\t\t\t\tactiveOptionIndex: -1,\n\t\t\t\tisOpen: false,\n\t\t\t});\n\n\t\t\tif (this.props.variant === 'popover' && trigger === 'cancel') {\n\t\t\t\tif (this.props.popover.props.onClose) {\n\t\t\t\t\tthis.props.popover.props.onClose(event, { trigger });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.props.events.onClose) {\n\t\t\t\tthis.props.events.onClose(event, {});\n\t\t\t}\n\t\t}\n\t};\n\n\thandleInputBlur = (event) => {\n\t\t// If menu is open when the input's onBlur event fires, it will close before the onClick of the menu item can fire.\n\t\tsetTimeout(() => {\n\t\t\tconst activeElement = documentDefined ? document.activeElement : false;\n\t\t\t// detect if the scrollbar of the combobox-autocomplete/lookup menu is clicked in IE11. If it is, return focus to input, and do not close menu.\n\t\t\tif (\n\t\t\t\tactiveElement &&\n\t\t\t\tactiveElement.tagName === 'DIV' &&\n\t\t\t\tactiveElement.id === `${this.getId()}-listbox`\n\t\t\t) {\n\t\t\t\tif (this.inputRef) {\n\t\t\t\t\tthis.inputRef.focus();\n\t\t\t\t}\n\t\t\t} else if (!this.props.popover) {\n\t\t\t\tthis.handleClose(event);\n\t\t\t}\n\t\t}, 200);\n\n\t\tif (this.props.events.onBlur) {\n\t\t\tthis.props.events.onBlur(event);\n\t\t}\n\t};\n\n\thandleInputChange = (event) => {\n\t\tthis.requestOpenMenu();\n\t\tif (this.props.events && this.props.events.onChange) {\n\t\t\tthis.props.events.onChange(event, { value: event.target.value });\n\t\t}\n\t};\n\n\thandleInputFocus = (event) => {\n\t\tif (this.props.events.onFocus) {\n\t\t\tthis.props.events.onFocus(event, {});\n\t\t}\n\t};\n\n\thandleInputSubmit = (event) => {\n\t\tif (this.state.activeOption && this.state.activeOption.disabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (\n\t\t\tthis.state.activeOption &&\n\t\t\t(this.state.activeOption.type === 'header' ||\n\t\t\t\tthis.state.activeOption.type === 'footer')\n\t\t) {\n\t\t\tthis.state.activeOption.onClick(event);\n\t\t\treturn;\n\t\t}\n\n\t\t// use menu options\n\t\tif (this.getIsActiveOption()) {\n\t\t\tthis.handleSelect(event, {\n\t\t\t\toption: this.state.activeOption,\n\t\t\t\tselection: this.props.selection,\n\t\t\t});\n\t\t\t// use input value, if not limited to predefined options (in the menu)\n\t\t} else if (\n\t\t\t!this.props.predefinedOptionsOnly &&\n\t\t\tevent.target.value !== '' &&\n\t\t\tthis.props.events.onSubmit\n\t\t) {\n\t\t\tthis.props.events.onSubmit(event, {\n\t\t\t\tvalue: event.target.value,\n\t\t\t});\n\t\t}\n\t};\n\n\t/**\n\t * Input and menu keyboard event methods\n\t */\n\n\thandleKeyDown = (event) => {\n\t\tconst callbacks = {\n\t\t\t[KEYS.DOWN]: { callback: this.handleKeyDownDown },\n\t\t\t[KEYS.ENTER]: { callback: this.handleInputSubmit },\n\t\t\t[KEYS.ESCAPE]: { callback: this.handleClose },\n\t\t\t[KEYS.UP]: { callback: this.handleKeyDownUp },\n\t\t};\n\n\t\tif (this.props.variant === 'readonly') {\n\t\t\tif (this.props.selection.length > 2) {\n\t\t\t\tcallbacks[KEYS.TAB] = { callback: this.handleKeyDownTab };\n\t\t\t} else {\n\t\t\t\tcallbacks[KEYS.TAB] = undefined;\n\t\t\t}\n\t\t\tcallbacks.other = {\n\t\t\t\tcallback: this.handleKeyDownOther,\n\t\t\t\tstopPropagation: false,\n\t\t\t};\n\t\t}\n\n\t\t// Propagate events when menu is closed\n\t\tconst stopPropagation = this.getIsOpen();\n\n\t\t// Helper function that takes an object literal of callbacks that are triggered with a key event\n\t\tmapKeyEventCallbacks(event, { callbacks, stopPropagation });\n\t};\n\n\thandleKeyDownDown = (event) => {\n\t\t// Don't open if user is selecting text\n\t\tif (!event.shiftKey) {\n\t\t\tthis.openDialog();\n\t\t}\n\n\t\tif (this.props.variant !== 'popover') {\n\t\t\tthis.handleNavigateListboxMenu(event, { direction: 'next' });\n\t\t}\n\t};\n\n\thandleKeyDownTab = () => {\n\t\tif (this.selectedListboxRef) {\n\t\t\tthis.setState({\n\t\t\t\tlistboxHasFocus: true,\n\t\t\t});\n\t\t}\n\t};\n\n\thandleKeyDownUp = (event) => {\n\t\t// Don't open if user is selecting text\n\t\tif (!event.shiftKey && this.getIsOpen()) {\n\t\t\tthis.handleNavigateListboxMenu(event, { direction: 'previous' });\n\t\t}\n\t};\n\n\thandleKeyDownOther = (event) => {\n\t\tconst activeOptionIndex = keyLetterMenuItemSelect({\n\t\t\tkey: event.key,\n\t\t\tkeyBuffer: this.menuKeyBuffer,\n\t\t\tkeyCode: event.keyCode,\n\t\t\toptions: this.getOptions(),\n\t\t});\n\n\t\tif (activeOptionIndex !== undefined) {\n\t\t\tif (this.getIsOpen()) {\n\t\t\t\tmenuItemSelectScroll({\n\t\t\t\t\tcontainer: this.menuRef,\n\t\t\t\t\tfocusedIndex: activeOptionIndex,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\tactiveOption: this.getOptions()[activeOptionIndex],\n\t\t\t\tactiveOptionIndex,\n\t\t\t});\n\t\t}\n\t};\n\n\thandleNavigateListboxMenu = (event, { direction }) => {\n\t\tconst offsets = { next: 1, previous: -1 };\n\t\t// takes current/previous state and returns an object with the new state\n\t\tthis.setState((prevState) => {\n\t\t\tconst newIndex = this.getNewActiveOptionIndex({\n\t\t\t\tactiveOptionIndex: prevState.activeOptionIndex,\n\t\t\t\toffset: offsets[direction],\n\t\t\t\toptions: this.getOptions(),\n\t\t\t});\n\n\t\t\t// eslint-disable-next-line react/no-access-state-in-setstate\n\t\t\tif (this.getIsOpen()) {\n\t\t\t\tmenuItemSelectScroll({\n\t\t\t\t\tcontainer: this.menuRef,\n\t\t\t\t\tfocusedIndex: newIndex,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tactiveOption: this.getOptions()[newIndex],\n\t\t\t\tactiveOptionIndex: newIndex,\n\t\t\t};\n\t\t});\n\t};\n\n\thandleNavigateSelectedListbox = (event, { direction }) => {\n\t\tconst offsets = { next: 1, previous: -1 };\n\t\tthis.setState((prevState) => {\n\t\t\tconst isLastOptionAndRightIsPressed =\n\t\t\t\tprevState.activeSelectedOptionIndex + 1 ===\n\t\t\t\t\tthis.props.selection.length && direction === 'next';\n\t\t\tconst isFirstOptionAndLeftIsPressed =\n\t\t\t\tprevState.activeSelectedOptionIndex === 0 && direction === 'previous';\n\t\t\tlet newState;\n\n\t\t\tif (isLastOptionAndRightIsPressed) {\n\t\t\t\tnewState = {\n\t\t\t\t\tactiveSelectedOption: this.props.selection[0],\n\t\t\t\t\tactiveSelectedOptionIndex: 0,\n\t\t\t\t\tlistboxHasFocus: true,\n\t\t\t\t};\n\t\t\t} else if (isFirstOptionAndLeftIsPressed) {\n\t\t\t\tnewState = {\n\t\t\t\t\tactiveSelectedOption: this.props.selection[\n\t\t\t\t\t\tthis.props.selection.length - 1\n\t\t\t\t\t],\n\t\t\t\t\tactiveSelectedOptionIndex: this.props.selection.length - 1,\n\t\t\t\t\tlistboxHasFocus: true,\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tconst newIndex = this.getNewActiveOptionIndex({\n\t\t\t\t\tactiveOptionIndex: prevState.activeSelectedOptionIndex,\n\t\t\t\t\toffset: offsets[direction],\n\t\t\t\t\toptions: this.props.selection,\n\t\t\t\t});\n\t\t\t\tnewState = {\n\t\t\t\t\tactiveSelectedOption: this.props.selection[newIndex],\n\t\t\t\t\tactiveSelectedOptionIndex: newIndex,\n\t\t\t\t\tlistboxHasFocus: true,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn newState;\n\t\t});\n\t};\n\n\thandleOpen = (event, data) => {\n\t\tconst isOpen = this.getIsOpen();\n\n\t\tif (!isOpen) {\n\t\t\tif (currentOpenDropdown && isFunction(currentOpenDropdown.handleClose)) {\n\t\t\t\tcurrentOpenDropdown.handleClose();\n\t\t\t}\n\t\t} else {\n\t\t\tcurrentOpenDropdown = this;\n\n\t\t\tthis.setState({\n\t\t\t\tisOpen: true,\n\t\t\t});\n\n\t\t\tif (this.props.events.onOpen) {\n\t\t\t\tthis.props.events.onOpen(event, data);\n\t\t\t}\n\n\t\t\tif (this.props.variant === 'readonly') {\n\t\t\t\tconst activeOptionIndex = findIndex(this.getOptions(), (item) =>\n\t\t\t\t\tisEqual(item, this.props.selection[0])\n\t\t\t\t);\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tactiveOptionIndex,\n\t\t\t\t\tactiveOption: this.props.selection[0],\n\t\t\t\t});\n\n\t\t\t\tif (this.menuRef !== null) {\n\t\t\t\t\tmenuItemSelectScroll({\n\t\t\t\t\t\tcontainer: this.menuRef,\n\t\t\t\t\t\tfocusedIndex: activeOptionIndex,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\thandlePillFocus = (event, { option, index }) => {\n\t\tif (!this.state.listboxHasFocus) {\n\t\t\tthis.setState({\n\t\t\t\tactiveSelectedOption: option,\n\t\t\t\tactiveSelectedOptionIndex: index,\n\t\t\t\tlistboxHasFocus: true,\n\t\t\t});\n\t\t}\n\t};\n\n\t/**\n\t * Selected options with selected listbox event methods\n\t */\n\n\thandleRemoveSelectedOption = (event, { option, index }) => {\n\t\tevent.preventDefault();\n\t\tconst onlyOnePillAndInputExists = this.props.selection.length === 1;\n\t\tconst isReadOnlyAndTwoPillsExists =\n\t\t\tthis.props.selection.length === 2 &&\n\t\t\tthis.props.variant === 'readonly' &&\n\t\t\tthis.props.multiple;\n\t\tconst lastPillWasRemoved = index + 1 === this.props.selection.length;\n\n\t\tif (\n\t\t\t(onlyOnePillAndInputExists || isReadOnlyAndTwoPillsExists) &&\n\t\t\tthis.inputRef\n\t\t) {\n\t\t\tthis.inputRef.focus();\n\t\t} else if (lastPillWasRemoved) {\n\t\t\t// set focus to previous option and index\n\t\t\tthis.setState({\n\t\t\t\tactiveSelectedOption: this.props.selection[index - 1],\n\t\t\t\tactiveSelectedOptionIndex: index - 1,\n\t\t\t\tlistboxHasFocus: true,\n\t\t\t});\n\t\t} else {\n\t\t\t// set focus to next option, but same index\n\t\t\tthis.setState({\n\t\t\t\tactiveSelectedOption: this.props.selection[index + 1],\n\t\t\t\tactiveSelectedOptionIndex: index,\n\t\t\t\tlistboxHasFocus: true,\n\t\t\t});\n\t\t}\n\n\t\tif (this.props.events.onRequestRemoveSelectedOption) {\n\t\t\tthis.props.events.onRequestRemoveSelectedOption(event, {\n\t\t\t\tselection: reject(this.props.selection, option),\n\t\t\t});\n\t\t}\n\t};\n\n\thandleRequestClose = (event, data) => {\n\t\tif (this.props.events.onRequestClose) {\n\t\t\tthis.props.events.onRequestClose(event, data);\n\t\t}\n\t\tif (this.getIsOpen()) {\n\t\t\tthis.handleClose(event, { trigger: 'cancel' });\n\t\t}\n\t};\n\n\thandleRequestFocusSelectedListbox = (event, { ref }) => {\n\t\tif (ref) {\n\t\t\tthis.activeSelectedOptionRef = ref;\n\t\t\tthis.activeSelectedOptionRef.focus();\n\t\t}\n\t};\n\n\thandleSelect = (event, { selection, option }) => {\n\t\tlet newSelection;\n\t\tconst isSelected = this.isSelected({ selection, option });\n\t\tconst singleSelectAndSelectedWasNotClicked =\n\t\t\t!this.props.multiple && !isSelected;\n\t\tconst multiSelectAndSelectedWasNotClicked =\n\t\t\tthis.props.multiple && !isSelected;\n\t\tconst deselectWasClicked = option.id === this.deselectId;\n\n\t\tif (deselectWasClicked) {\n\t\t\tnewSelection = [];\n\t\t} else if (singleSelectAndSelectedWasNotClicked) {\n\t\t\tnewSelection = [option];\n\t\t} else if (multiSelectAndSelectedWasNotClicked) {\n\t\t\tnewSelection = [...this.props.selection, option];\n\t\t} else {\n\t\t\tnewSelection = reject(this.props.selection, option);\n\t\t}\n\n\t\tif (this.props.events.onSelect) {\n\t\t\tthis.props.events.onSelect(event, { selection: newSelection });\n\t\t}\n\n\t\tthis.handleClose();\n\n\t\t// if (this.inputRef) {\n\t\t// \tthis.inputRef.focus();\n\t\t// }\n\t};\n\n\tisSelected = ({ selection, option }) => !!find(selection, option);\n\n\topenDialog = () => {\n\t\tif (this.props.events.onRequestOpen) {\n\t\t\tthis.props.events.onRequestOpen();\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tisOpen: true,\n\t\t\t});\n\t\t}\n\t};\n\n\trequestOpenMenu = () => {\n\t\tconst isInlineSingleSelectionAndIsNotSelected =\n\t\t\t!this.props.multiple &&\n\t\t\tthis.props.selection.length === 0 &&\n\t\t\tthis.props.variant === 'inline-listbox';\n\n\t\tif (\n\t\t\tisInlineSingleSelectionAndIsNotSelected ||\n\t\t\tthis.props.multiple ||\n\t\t\tthis.props.variant === 'readonly'\n\t\t) {\n\t\t\tthis.openDialog();\n\t\t}\n\t};\n\n\t/**\n\t * Combobox variant subrenders\n\t * (these can probably be broken into function components\n\t * if state is passed in as a prop)\n\t */\n\n\trenderBase = ({ assistiveText, labels, props, userDefinedProps }) => (\n\t\t<div className=\"slds-form-element__control\">\n\t\t\t<div className=\"slds-combobox_container\">\n\t\t\t\t<div\n\t\t\t\t\tclassName={classNames(\n\t\t\t\t\t\t'slds-combobox',\n\t\t\t\t\t\t'slds-dropdown-trigger',\n\t\t\t\t\t\t'slds-dropdown-trigger_click',\n\t\t\t\t\t\t'ignore-react-onclickoutside',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'slds-is-open': this.getIsOpen(),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'slds-has-error': props.errorText,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprops.className\n\t\t\t\t\t)}\n\t\t\t\t\t// Not in ARIA 1.2 spec, temporary for SLDS styles\n\t\t\t\t\trole=\"combobox\" // eslint-disable-line jsx-a11y/role-supports-aria-props, jsx-a11y/role-has-required-aria-props\n\t\t\t\t\taria-expanded={this.getIsOpen()}\n\t\t\t\t\taria-haspopup=\"listbox\" // eslint-disable-line jsx-a11y/aria-proptypes\n\t\t\t\t\t// used on menu's listbox\n\t\t\t\t\taria-owns={this.getIsOpen() ? `${this.getId()}-listbox` : undefined} // eslint-disable-line jsx-a11y/aria-proptypes\n\t\t\t\t>\n\t\t\t\t\t<InnerInput\n\t\t\t\t\t\taria-autocomplete=\"list\"\n\t\t\t\t\t\taria-controls={\n\t\t\t\t\t\t\tthis.getIsOpen() ? `${this.getId()}-listbox` : undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t\taria-activedescendant={\n\t\t\t\t\t\t\tthis.state.activeOption\n\t\t\t\t\t\t\t\t? `${this.getId()}-listbox-option-${this.state.activeOption.id}`\n\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t}\n\t\t\t\t\t\taria-describedby={this.getErrorId()}\n\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\tclassName=\"slds-combobox__input\"\n\t\t\t\t\t\tcontainerProps={{\n\t\t\t\t\t\t\tclassName: 'slds-combobox__form-element',\n\t\t\t\t\t\t\trole: 'none',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\thasSpinner={this.props.hasInputSpinner}\n\t\t\t\t\t\ticonRight={\n\t\t\t\t\t\t\t<InputIcon\n\t\t\t\t\t\t\t\tcategory=\"utility\"\n\t\t\t\t\t\t\t\tname=\"search\"\n\t\t\t\t\t\t\t\ttitle={labels.inputIconTitle}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tid={this.getId()}\n\t\t\t\t\t\tonFocus={this.handleInputFocus}\n\t\t\t\t\t\tonBlur={this.handleInputBlur}\n\t\t\t\t\t\tonKeyDown={this.handleKeyDown}\n\t\t\t\t\t\tinputRef={this.setInputRef}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tthis.openDialog();\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t\t\tplaceholder={labels.placeholder}\n\t\t\t\t\t\tdefaultValue={props.defaultValue}\n\t\t\t\t\t\treadOnly={\n\t\t\t\t\t\t\t!!(props.predefinedOptionsOnly && this.state.activeOption)\n\t\t\t\t\t\t}\n\t\t\t\t\t\trequired={props.required}\n\t\t\t\t\t\trole=\"textbox\"\n\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\tprops.predefinedOptionsOnly\n\t\t\t\t\t\t\t\t? (this.state.activeOption && this.state.activeOption.label) ||\n\t\t\t\t\t\t\t\t  props.value\n\t\t\t\t\t\t\t\t: props.value\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{...userDefinedProps.input}\n\t\t\t\t\t/>\n\t\t\t\t\t{this.getDialog({\n\t\t\t\t\t\tmenuRenderer: this.renderMenu({ assistiveText, labels }),\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<SelectedListBox\n\t\t\t\tactiveOption={this.state.activeSelectedOption}\n\t\t\t\tactiveOptionIndex={this.state.activeSelectedOptionIndex}\n\t\t\t\tassistiveText={assistiveText}\n\t\t\t\tevents={{\n\t\t\t\t\tonBlurPill: this.handleBlurPill,\n\t\t\t\t\tonPillFocus: this.handlePillFocus,\n\t\t\t\t\tonRequestFocus: this.handleRequestFocusSelectedListbox,\n\t\t\t\t\tonRequestFocusOnNextPill: this.handleNavigateSelectedListbox,\n\t\t\t\t\tonRequestFocusOnPreviousPill: this.handleNavigateSelectedListbox,\n\t\t\t\t\tonRequestRemove: this.handleRemoveSelectedOption,\n\t\t\t\t}}\n\t\t\t\tid={`${this.getId()}-selected-listbox`}\n\t\t\t\tlabels={labels}\n\t\t\t\tselectedListboxRef={this.setSelectedListboxRef}\n\t\t\t\tselection={props.selection}\n\t\t\t\tlistboxHasFocus={this.state.listboxHasFocus}\n\t\t\t/>\n\t\t\t{props.errorText && (\n\t\t\t\t<div className=\"slds-has-error\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tid={this.getErrorId()}\n\t\t\t\t\t\tclassName=\"slds-form-element__help slds-has-error\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{props.errorText}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n\n\trenderInlineMultiple = ({\n\t\tassistiveText,\n\t\tlabels,\n\t\tprops,\n\t\tuserDefinedProps,\n\t}) => (\n\t\t<div className=\"slds-form-element__control\">\n\t\t\t<div\n\t\t\t\tclassName={classNames('slds-combobox_container', {\n\t\t\t\t\t'slds-has-inline-listbox': props.selection.length,\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t{props.selection.length ? (\n\t\t\t\t\t<SelectedListBox\n\t\t\t\t\t\tactiveOption={this.state.activeSelectedOption}\n\t\t\t\t\t\tactiveOptionIndex={this.state.activeSelectedOptionIndex}\n\t\t\t\t\t\tassistiveText={assistiveText}\n\t\t\t\t\t\tcontainerRole=\"listbox\"\n\t\t\t\t\t\tcontainerAriaOrientation=\"horizontal\"\n\t\t\t\t\t\tlistboxRole=\"group\"\n\t\t\t\t\t\tlistboxAriaOrientation={null}\n\t\t\t\t\t\tevents={{\n\t\t\t\t\t\t\tonBlurPill: this.handleBlurPill,\n\t\t\t\t\t\t\tonPillFocus: this.handlePillFocus,\n\t\t\t\t\t\t\tonRequestFocus: this.handleRequestFocusSelectedListbox,\n\t\t\t\t\t\t\tonRequestFocusOnNextPill: this.handleNavigateSelectedListbox,\n\t\t\t\t\t\t\tonRequestFocusOnPreviousPill: this.handleNavigateSelectedListbox,\n\t\t\t\t\t\t\tonRequestRemove: this.handleRemoveSelectedOption,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tid={`${this.getId()}-selected-listbox`}\n\t\t\t\t\t\tlabels={labels}\n\t\t\t\t\t\tselectedListboxRef={this.setSelectedListboxRef}\n\t\t\t\t\t\tselection={props.selection}\n\t\t\t\t\t\tlistboxHasFocus={this.state.listboxHasFocus}\n\t\t\t\t\t/>\n\t\t\t\t) : null}\n\t\t\t\t<div\n\t\t\t\t\tclassName={classNames(\n\t\t\t\t\t\t'slds-combobox',\n\t\t\t\t\t\t'slds-dropdown-trigger',\n\t\t\t\t\t\t'slds-dropdown-trigger_click',\n\t\t\t\t\t\t'ignore-react-onclickoutside',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'slds-is-open': this.getIsOpen(),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'slds-has-error': props.errorText,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprops.className\n\t\t\t\t\t)}\n\t\t\t\t\t// Not in ARIA 1.2 spec, temporary for SLDS styles\n\t\t\t\t\trole=\"combobox\" // eslint-disable-line jsx-a11y/role-supports-aria-props, jsx-a11y/role-has-required-aria-props\n\t\t\t\t\taria-expanded={this.getIsOpen()}\n\t\t\t\t\taria-haspopup=\"listbox\" // eslint-disable-line jsx-a11y/aria-proptypes\n\t\t\t\t>\n\t\t\t\t\t<InnerInput\n\t\t\t\t\t\taria-autocomplete=\"list\"\n\t\t\t\t\t\taria-controls={\n\t\t\t\t\t\t\tthis.getIsOpen() ? `${this.getId()}-listbox` : undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t\taria-activedescendant={\n\t\t\t\t\t\t\tthis.state.activeOption\n\t\t\t\t\t\t\t\t? `${this.getId()}-listbox-option-${this.state.activeOption.id}`\n\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t}\n\t\t\t\t\t\taria-describedby={this.getErrorId()}\n\t\t\t\t\t\tdefaultValue={props.defaultValue}\n\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\tclassName=\"slds-combobox__input\"\n\t\t\t\t\t\tcontainerProps={{\n\t\t\t\t\t\t\tclassName: 'slds-combobox__form-element',\n\t\t\t\t\t\t\trole: 'none',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\thasSpinner={this.props.hasInputSpinner}\n\t\t\t\t\t\ticonRight={\n\t\t\t\t\t\t\t<InputIcon\n\t\t\t\t\t\t\t\tcategory=\"utility\"\n\t\t\t\t\t\t\t\tname=\"search\"\n\t\t\t\t\t\t\t\ttitle={labels.inputIconTitle}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tid={this.getId()}\n\t\t\t\t\t\tonFocus={this.handleInputFocus}\n\t\t\t\t\t\tonBlur={this.handleInputBlur}\n\t\t\t\t\t\tonKeyDown={this.handleKeyDown}\n\t\t\t\t\t\tinputRef={this.setInputRef}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tthis.openDialog();\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t\t\tplaceholder={labels.placeholder}\n\t\t\t\t\t\treadOnly={\n\t\t\t\t\t\t\t!!(props.predefinedOptionsOnly && this.state.activeOption)\n\t\t\t\t\t\t}\n\t\t\t\t\t\trequired={props.required}\n\t\t\t\t\t\trole=\"textbox\"\n\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\tprops.predefinedOptionsOnly\n\t\t\t\t\t\t\t\t? (this.state.activeOption && this.state.activeOption.label) ||\n\t\t\t\t\t\t\t\t  props.value\n\t\t\t\t\t\t\t\t: props.value\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{...userDefinedProps.input}\n\t\t\t\t\t/>\n\t\t\t\t\t{this.getDialog({\n\t\t\t\t\t\tmenuRenderer: this.renderMenu({ assistiveText, labels }),\n\t\t\t\t\t})}\n\t\t\t\t\t{props.errorText && (\n\t\t\t\t\t\t<div id={this.getErrorId()} className=\"slds-form-element__help\">\n\t\t\t\t\t\t\t{props.errorText}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n\n\trenderInlineSingle = ({ assistiveText, labels, props, userDefinedProps }) => {\n\t\tconst iconLeft =\n\t\t\tprops.selection[0] && props.selection[0].icon\n\t\t\t\t? React.cloneElement(props.selection[0].icon, {\n\t\t\t\t\t\tcontainerClassName: 'slds-combobox__input-entity-icon',\n\t\t\t\t  })\n\t\t\t\t: null;\n\n\t\tconst value =\n\t\t\tprops.selection[0] && props.selection[0].label\n\t\t\t\t? props.selection[0].label\n\t\t\t\t: props.value;\n\n\t\treturn (\n\t\t\t<div className=\"slds-form-element__control\">\n\t\t\t\t<div\n\t\t\t\t\tclassName={classNames('slds-combobox_container', {\n\t\t\t\t\t\t'slds-has-inline-listbox': props.selection.length,\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={classNames(\n\t\t\t\t\t\t\t'slds-combobox',\n\t\t\t\t\t\t\t'slds-dropdown-trigger',\n\t\t\t\t\t\t\t'slds-dropdown-trigger_click',\n\t\t\t\t\t\t\t'ignore-react-onclickoutside',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'slds-is-open': this.getIsOpen(),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'slds-has-error': props.errorText,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tprops.className\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t// Not in ARIA 1.2 spec, temporary for SLDS styles\n\t\t\t\t\t\trole=\"combobox\" // eslint-disable-line jsx-a11y/role-supports-aria-props, jsx-a11y/role-has-required-aria-props\n\t\t\t\t\t\taria-expanded={this.getIsOpen()}\n\t\t\t\t\t\taria-haspopup=\"listbox\" // eslint-disable-line jsx-a11y/aria-proptypes\n\t\t\t\t\t>\n\t\t\t\t\t\t<InnerInput\n\t\t\t\t\t\t\tdefaultValue={props.defaultValue}\n\t\t\t\t\t\t\taria-autocomplete=\"list\"\n\t\t\t\t\t\t\taria-controls={\n\t\t\t\t\t\t\t\tthis.getIsOpen() ? `${this.getId()}-listbox` : undefined\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taria-activedescendant={\n\t\t\t\t\t\t\t\tthis.state.activeOption\n\t\t\t\t\t\t\t\t\t? `${this.getId()}-listbox-option-${\n\t\t\t\t\t\t\t\t\t\t\tthis.state.activeOption.id\n\t\t\t\t\t\t\t\t\t  }`\n\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taria-describedby={this.getErrorId()}\n\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\tclassName=\"slds-combobox__input\"\n\t\t\t\t\t\t\tcontainerProps={{\n\t\t\t\t\t\t\t\tclassName: 'slds-combobox__form-element',\n\t\t\t\t\t\t\t\trole: 'none',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tdisabled={this.props.singleInputDisabled}\n\t\t\t\t\t\t\thasSpinner={this.props.hasInputSpinner}\n\t\t\t\t\t\t\ticonRight={\n\t\t\t\t\t\t\t\tprops.selection.length ? (\n\t\t\t\t\t\t\t\t\t<InputIcon\n\t\t\t\t\t\t\t\t\t\tassistiveText={{\n\t\t\t\t\t\t\t\t\t\t\ticon: assistiveText.removeSingleSelectedOption,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tbuttonRef={(component) => {\n\t\t\t\t\t\t\t\t\t\t\tthis.buttonRef = component;\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tcategory=\"utility\"\n\t\t\t\t\t\t\t\t\t\ticonPosition=\"right\"\n\t\t\t\t\t\t\t\t\t\tname=\"close\"\n\t\t\t\t\t\t\t\t\t\tonClick={(event) => {\n\t\t\t\t\t\t\t\t\t\t\tthis.handleRemoveSelectedOption(event, {\n\t\t\t\t\t\t\t\t\t\t\t\toption: props.selection[0],\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<InputIcon category=\"utility\" name=\"search\" />\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ticonLeft={iconLeft}\n\t\t\t\t\t\t\tid={this.getId()}\n\t\t\t\t\t\t\tonFocus={this.handleInputFocus}\n\t\t\t\t\t\t\tonBlur={this.handleInputBlur}\n\t\t\t\t\t\t\tonKeyDown={this.handleKeyDown}\n\t\t\t\t\t\t\tinputRef={this.setInputRef}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tthis.requestOpenMenu();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonChange={(event) => {\n\t\t\t\t\t\t\t\tif (!props.selection.length) {\n\t\t\t\t\t\t\t\t\tthis.handleInputChange(event);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tplaceholder={labels.placeholder}\n\t\t\t\t\t\t\treadOnly={\n\t\t\t\t\t\t\t\t!!(props.predefinedOptionsOnly && this.state.activeOption) ||\n\t\t\t\t\t\t\t\t!!props.selection.length\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\trequired={props.required}\n\t\t\t\t\t\t\trole=\"textbox\"\n\t\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\t\tprops.predefinedOptionsOnly\n\t\t\t\t\t\t\t\t\t? (this.state.activeOption &&\n\t\t\t\t\t\t\t\t\t\t\tthis.state.activeOption.label) ||\n\t\t\t\t\t\t\t\t\t  props.value\n\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{...userDefinedProps.input}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{this.getDialog({\n\t\t\t\t\t\t\tmenuRenderer: this.renderMenu({ assistiveText, labels }),\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t{props.errorText && (\n\t\t\t\t\t\t\t<div id={this.getErrorId()} className=\"slds-form-element__help\">\n\t\t\t\t\t\t\t\t{props.errorText}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\trenderMenu = ({ assistiveText, labels }) => {\n\t\tconst menuVariant = {\n\t\t\tbase: 'icon-title-subtitle',\n\t\t\t'inline-listbox': 'icon-title-subtitle',\n\t\t\treadonly: 'checkbox',\n\t\t};\n\n\t\tconst readonlyItemVisibleLength =\n\t\t\tthis.props.variant === 'readonly' ? 5 : null;\n\n\t\treturn (\n\t\t\t<Menu\n\t\t\t\tassistiveText={assistiveText}\n\t\t\t\tactiveOption={this.state.activeOption}\n\t\t\t\tactiveOptionIndex={this.state.activeOptionIndex}\n\t\t\t\tclassNameMenu={this.props.classNameMenu}\n\t\t\t\tclassNameMenuSubHeader={this.props.classNameMenuSubHeader}\n\t\t\t\tclearActiveOption={this.clearActiveOption}\n\t\t\t\tdeselectId={this.deselectId}\n\t\t\t\tinheritWidthOf={this.props.inheritWidthOf}\n\t\t\t\tinputId={this.getId()}\n\t\t\t\tinputValue={this.props.value}\n\t\t\t\tisSelected={this.isSelected}\n\t\t\t\titemVisibleLength={\n\t\t\t\t\tthis.props.menuItemVisibleLength || readonlyItemVisibleLength\n\t\t\t\t}\n\t\t\t\tlabels={labels}\n\t\t\t\thasMenuSpinner={this.props.hasMenuSpinner}\n\t\t\t\thasDeselect={this.props.hasDeselect}\n\t\t\t\tmenuItem={this.props.menuItem}\n\t\t\t\tmenuPosition={this.props.menuPosition}\n\t\t\t\tmenuRef={(ref) => {\n\t\t\t\t\tthis.menuRef = ref;\n\t\t\t\t}}\n\t\t\t\tmaxWidth={this.props.menuMaxWidth}\n\t\t\t\toptions={this.getOptions()}\n\t\t\t\toptionsAddItem={this.props.optionsAddItem}\n\t\t\t\toptionsSearchEntity={this.props.optionsSearchEntity}\n\t\t\t\tonSelect={this.handleSelect}\n\t\t\t\t// For backward compatibility, 'menuItem' prop will be deprecated soon\n\t\t\t\tonRenderMenuItem={\n\t\t\t\t\tthis.props.onRenderMenuItem\n\t\t\t\t\t\t? this.props.onRenderMenuItem\n\t\t\t\t\t\t: this.props.menuItem\n\t\t\t\t}\n\t\t\t\tselection={this.props.selection}\n\t\t\t\ttooltipMenuItemDisabled={this.props.tooltipMenuItemDisabled}\n\t\t\t\tvariant={menuVariant[this.props.variant]}\n\t\t\t/>\n\t\t);\n\t};\n\n\trenderPopover = ({ assistiveText, labels, props }) => {\n\t\tconst popoverProps = this.getCustomPopoverProps(\n\t\t\tthis.props.popover.props.body,\n\t\t\t{ assistiveText, labels }\n\t\t);\n\n\t\treturn (\n\t\t\t<div className=\"slds-form-element__control\">\n\t\t\t\t<div className=\"slds-combobox_container\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={classNames(\n\t\t\t\t\t\t\t'slds-combobox',\n\t\t\t\t\t\t\t'slds-dropdown-trigger',\n\t\t\t\t\t\t\t'slds-dropdown-trigger_click',\n\t\t\t\t\t\t\t'ignore-react-onclickoutside',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'slds-is-open': this.getIsOpen(),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'slds-has-error': props.errorText,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tprops.className\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t// Not in ARIA 1.2 spec, temporary for SLDS styles\n\t\t\t\t\t\trole=\"combobox\" // eslint-disable-line jsx-a11y/role-supports-aria-props, jsx-a11y/role-has-required-aria-props\n\t\t\t\t\t\taria-expanded={this.getIsOpen()}\n\t\t\t\t\t\taria-haspopup=\"dialog\" // eslint-disable-line jsx-a11y/aria-proptypes\n\t\t\t\t\t>\n\t\t\t\t\t\t<Popover {...popoverProps}>\n\t\t\t\t\t\t\t<InnerInput\n\t\t\t\t\t\t\t\taria-autocomplete=\"none\"\n\t\t\t\t\t\t\t\taria-controls={\n\t\t\t\t\t\t\t\t\tthis.getIsOpen() ? `${this.getId()}-popover` : undefined\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\taria-describedby={this.getErrorId()}\n\t\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\t\tclassName=\"slds-combobox__input\"\n\t\t\t\t\t\t\t\tcontainerProps={{\n\t\t\t\t\t\t\t\t\tclassName: 'slds-combobox__form-element',\n\t\t\t\t\t\t\t\t\trole: 'none',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\ticonRight={\n\t\t\t\t\t\t\t\t\t<InputIcon\n\t\t\t\t\t\t\t\t\t\tcategory=\"utility\"\n\t\t\t\t\t\t\t\t\t\tname=\"down\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"combobox\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tid={this.getId()}\n\t\t\t\t\t\t\t\tonFocus={this.handleInputFocus}\n\t\t\t\t\t\t\t\tonBlur={this.handleInputBlur}\n\t\t\t\t\t\t\t\tonKeyDown={this.handleKeyDown}\n\t\t\t\t\t\t\t\tinputRef={this.setInputRef}\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tthis.openDialog();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t\t\t\t\tplaceholder={labels.placeholder}\n\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\trequired={props.required}\n\t\t\t\t\t\t\t\trole=\"textbox\"\n\t\t\t\t\t\t\t\tvalue={props.value}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Popover>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{props.errorText && (\n\t\t\t\t\t<div className=\"slds-has-error\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tid={this.getErrorId()}\n\t\t\t\t\t\t\tclassName=\"slds-form-element__help slds-has-error\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{props.errorText}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t};\n\n\trenderReadOnlyMultiple = ({\n\t\tassistiveText,\n\t\tlabels,\n\t\tprops,\n\t\tuserDefinedProps,\n\t}) => {\n\t\tconst value =\n\t\t\tprops.selection.length > 1\n\t\t\t\t? labels.multipleOptionsSelected ||\n\t\t\t\t  `${props.selection.length} options selected`\n\t\t\t\t: (props.selection[0] && props.selection[0].label) || '';\n\n\t\treturn (\n\t\t\t<div className=\"slds-form-element__control\">\n\t\t\t\t<div className=\"slds-combobox_container\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={classNames(\n\t\t\t\t\t\t\t'slds-combobox',\n\t\t\t\t\t\t\t'slds-dropdown-trigger',\n\t\t\t\t\t\t\t'slds-dropdown-trigger_click',\n\t\t\t\t\t\t\t'ignore-react-onclickoutside',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'slds-is-open': this.getIsOpen(),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'slds-has-error': props.errorText,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tprops.className\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t// Not in ARIA 1.2 spec, temporary for SLDS styles\n\t\t\t\t\t\trole=\"combobox\" // eslint-disable-line jsx-a11y/role-supports-aria-props, jsx-a11y/role-has-required-aria-props\n\t\t\t\t\t\taria-expanded={this.getIsOpen()}\n\t\t\t\t\t\taria-haspopup=\"listbox\" // eslint-disable-line jsx-a11y/aria-proptypes\n\t\t\t\t\t>\n\t\t\t\t\t\t<InnerInput\n\t\t\t\t\t\t\tdefaultValue={props.defaultValue}\n\t\t\t\t\t\t\taria-autocomplete=\"list\"\n\t\t\t\t\t\t\taria-controls={\n\t\t\t\t\t\t\t\tthis.getIsOpen() ? `${this.getId()}-listbox` : undefined\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taria-activedescendant={\n\t\t\t\t\t\t\t\tthis.state.activeOption\n\t\t\t\t\t\t\t\t\t? `${this.getId()}-listbox-option-${\n\t\t\t\t\t\t\t\t\t\t\tthis.state.activeOption.id\n\t\t\t\t\t\t\t\t\t  }`\n\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taria-describedby={this.getErrorId()}\n\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\tclassName=\"slds-combobox__input\"\n\t\t\t\t\t\t\tcontainerProps={{\n\t\t\t\t\t\t\t\tclassName: 'slds-combobox__form-element',\n\t\t\t\t\t\t\t\trole: 'none',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ticonRight={\n\t\t\t\t\t\t\t\t<InputIcon category=\"utility\" name=\"down\" variant=\"combobox\" />\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tid={this.getId()}\n\t\t\t\t\t\t\tonFocus={this.handleInputFocus}\n\t\t\t\t\t\t\tonBlur={this.handleInputBlur}\n\t\t\t\t\t\t\tonKeyDown={this.handleKeyDown}\n\t\t\t\t\t\t\tinputRef={this.setInputRef}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tthis.requestOpenMenu();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonChange={(event) => {\n\t\t\t\t\t\t\t\tif (!props.selection.length) {\n\t\t\t\t\t\t\t\t\tthis.handleInputChange(event);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tplaceholder={labels.placeholderReadOnly}\n\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\trequired={props.required}\n\t\t\t\t\t\t\trole=\"textbox\"\n\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\t{...userDefinedProps.input}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{this.getDialog({\n\t\t\t\t\t\t\tmenuRenderer: this.renderMenu({ assistiveText, labels }),\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<SelectedListBox\n\t\t\t\t\tactiveOption={this.state.activeSelectedOption}\n\t\t\t\t\tactiveOptionIndex={this.state.activeSelectedOptionIndex}\n\t\t\t\t\tassistiveText={assistiveText}\n\t\t\t\t\tevents={{\n\t\t\t\t\t\tonBlurPill: this.handleBlurPill,\n\t\t\t\t\t\tonPillFocus: this.handlePillFocus,\n\t\t\t\t\t\tonRequestFocus: this.handleRequestFocusSelectedListbox,\n\t\t\t\t\t\tonRequestFocusOnNextPill: this.handleNavigateSelectedListbox,\n\t\t\t\t\t\tonRequestFocusOnPreviousPill: this.handleNavigateSelectedListbox,\n\t\t\t\t\t\tonRequestRemove: this.handleRemoveSelectedOption,\n\t\t\t\t\t}}\n\t\t\t\t\tid={`${this.getId()}-selected-listbox`}\n\t\t\t\t\tlabels={labels}\n\t\t\t\t\tselectedListboxRef={this.setSelectedListboxRef}\n\t\t\t\t\tselection={props.selection}\n\t\t\t\t\tlistboxHasFocus={this.state.listboxHasFocus}\n\t\t\t\t\tvariant={this.props.variant}\n\t\t\t\t\trenderAtSelectionLength={2}\n\t\t\t\t/>\n\t\t\t\t{props.errorText && (\n\t\t\t\t\t<div className=\"slds-has-error\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tid={this.getErrorId()}\n\t\t\t\t\t\t\tclassName=\"slds-form-element__help slds-has-error\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{props.errorText}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t};\n\n\trenderReadOnlySingle = ({\n\t\tassistiveText,\n\t\tlabels,\n\t\tprops,\n\t\tuserDefinedProps,\n\t}) => {\n\t\tconst activeOptionLabel =\n\t\t\tthis.state.activeOption && this.state.activeOption.label;\n\t\tconst selectedOptionLabel = props.selection[0] && props.selection[0].label;\n\t\tlet inputValue = activeOptionLabel || selectedOptionLabel || '';\n\n\t\tif (props.selection[0] && props.selection[0].value === '') {\n\t\t\tinputValue = '';\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"slds-form-element__control\">\n\t\t\t\t<div className=\"slds-combobox_container\">\n\t\t\t\t\t<div // aria attributes have been moved to the `div` wrapping `input` to comply with ARIA 1.1.\n\t\t\t\t\t\tclassName={classNames(\n\t\t\t\t\t\t\t'slds-combobox',\n\t\t\t\t\t\t\t'slds-dropdown-trigger',\n\t\t\t\t\t\t\t'slds-dropdown-trigger_click',\n\t\t\t\t\t\t\t'ignore-react-onclickoutside',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'slds-is-open': this.getIsOpen(),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'slds-has-error': props.errorText,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tprops.className\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t// Not in ARIA 1.2 spec, temporary for SLDS styles\n\t\t\t\t\t\trole=\"combobox\" // eslint-disable-line jsx-a11y/role-supports-aria-props, jsx-a11y/role-has-required-aria-props\n\t\t\t\t\t\taria-expanded={this.getIsOpen()}\n\t\t\t\t\t\taria-haspopup=\"listbox\" // eslint-disable-line jsx-a11y/aria-proptypes\n\t\t\t\t\t>\n\t\t\t\t\t\t<InnerInput\n\t\t\t\t\t\t\tdefaultValue={props.defaultValue}\n\t\t\t\t\t\t\taria-autocomplete=\"list\"\n\t\t\t\t\t\t\taria-controls={\n\t\t\t\t\t\t\t\tthis.getIsOpen() ? `${this.getId()}-listbox` : undefined\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taria-activedescendant={\n\t\t\t\t\t\t\t\tthis.state.activeOption\n\t\t\t\t\t\t\t\t\t? `${this.getId()}-listbox-option-${\n\t\t\t\t\t\t\t\t\t\t\tthis.state.activeOption.id\n\t\t\t\t\t\t\t\t\t  }`\n\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taria-describedby={this.getErrorId()}\n\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\tclassName=\"slds-combobox__input\"\n\t\t\t\t\t\t\tcontainerProps={{\n\t\t\t\t\t\t\t\tclassName: 'slds-combobox__form-element',\n\t\t\t\t\t\t\t\trole: 'none',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tdisabled={this.props.singleInputDisabled}\n\t\t\t\t\t\t\ticonRight={\n\t\t\t\t\t\t\t\t<InputIcon category=\"utility\" name=\"down\" variant=\"combobox\" />\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tid={this.getId()}\n\t\t\t\t\t\t\tonFocus={this.handleInputFocus}\n\t\t\t\t\t\t\tonBlur={this.handleInputBlur}\n\t\t\t\t\t\t\tonKeyDown={this.handleKeyDown}\n\t\t\t\t\t\t\tinputRef={this.setInputRef}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tthis.requestOpenMenu();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonChange={(event) => {\n\t\t\t\t\t\t\t\tif (!props.selection.length) {\n\t\t\t\t\t\t\t\t\tthis.handleInputChange(event);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tplaceholder={labels.placeholderReadOnly}\n\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\trequired={props.required}\n\t\t\t\t\t\t\trole=\"textbox\"\n\t\t\t\t\t\t\tvalue={inputValue}\n\t\t\t\t\t\t\t{...userDefinedProps.input}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{this.getDialog({\n\t\t\t\t\t\t\tmenuRenderer: this.renderMenu({ assistiveText, labels }),\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t{props.errorText && (\n\t\t\t\t\t\t\t<div id={this.getErrorId()} className=\"slds-form-element__help\">\n\t\t\t\t\t\t\t\t{props.errorText}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\trender() {\n\t\tconst { props } = this;\n\t\t// Merge objects of strings with their default object\n\t\tconst assistiveText = assign(\n\t\t\t{},\n\t\t\tdefaultProps.assistiveText,\n\t\t\tprops.assistiveText\n\t\t);\n\t\tconst labels = assign({}, defaultProps.labels, this.props.labels);\n\t\tconst hasRenderedLabel =\n\t\t\tlabels.label || (assistiveText && assistiveText.label);\n\t\t// declare user defined props\n\t\tconst userDefinedProps = {};\n\t\tif (props.input) {\n\t\t\t// at the moment we only support overriding the input props\n\t\t\tuserDefinedProps.input = props.input.props;\n\t\t}\n\t\tconst subRenderParameters = {\n\t\t\tassistiveText,\n\t\t\tlabels,\n\t\t\tprops: this.props,\n\t\t\tuserDefinedProps,\n\t\t};\n\t\tconst multipleOrSingle = this.props.multiple ? 'multiple' : 'single';\n\t\tconst subRenders = {\n\t\t\tbase: {\n\t\t\t\tmultiple: this.renderBase, // same\n\t\t\t\tsingle: this.renderBase,\n\t\t\t},\n\t\t\t'inline-listbox': {\n\t\t\t\tmultiple: this.renderInlineMultiple,\n\t\t\t\tsingle: this.renderInlineSingle,\n\t\t\t},\n\t\t\tpopover: {\n\t\t\t\tmultiple: this.renderPopover, // same\n\t\t\t\tsingle: this.renderPopover,\n\t\t\t},\n\t\t\treadonly: {\n\t\t\t\tmultiple: this.renderReadOnlyMultiple,\n\t\t\t\tsingle: this.renderReadOnlySingle,\n\t\t\t},\n\t\t};\n\t\tconst variantExists = subRenders[this.props.variant][multipleOrSingle];\n\n\t\tconst mainCombobox = (\n\t\t\t<div\n\t\t\t\tclassName={classNames('slds-form-element', props.classNameContainer)}\n\t\t\t>\n\t\t\t\t{props.entityCombobox ? null : (\n\t\t\t\t\t<Label\n\t\t\t\t\t\tassistiveText={this.props.assistiveText}\n\t\t\t\t\t\thtmlFor={this.getId()}\n\t\t\t\t\t\tlabel={labels.label}\n\t\t\t\t\t\trequired={props.required}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{this.props.fieldLevelHelpTooltip && hasRenderedLabel ? (\n\t\t\t\t\t<FieldLevelHelpTooltip\n\t\t\t\t\t\tfieldLevelHelpTooltip={this.props.fieldLevelHelpTooltip}\n\t\t\t\t\t/>\n\t\t\t\t) : null}\n\t\t\t\t{variantExists\n\t\t\t\t\t? subRenders[this.props.variant][multipleOrSingle](\n\t\t\t\t\t\t\tsubRenderParameters\n\t\t\t\t\t  )\n\t\t\t\t\t: subRenders.base.multiple(subRenderParameters)}\n\t\t\t</div>\n\t\t);\n\n\t\treturn props.entityCombobox ? (\n\t\t\t<div className=\"slds-form-element\">\n\t\t\t\t<Label\n\t\t\t\t\tassistiveText={props.assistiveText}\n\t\t\t\t\thtmlFor={this.getId()}\n\t\t\t\t\tlabel={labels.label}\n\t\t\t\t\trequired={props.required}\n\t\t\t\t/>\n\t\t\t\t<div className=\"slds-form-element__control\">\n\t\t\t\t\t<div className=\"slds-combobox-group\">\n\t\t\t\t\t\t<div className=\"slds-combobox_object-switcher slds-combobox-addon_start\">\n\t\t\t\t\t\t\t{props.entityCombobox}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"slds-combobox_container slds-combobox-addon_end\">\n\t\t\t\t\t\t\t{mainCombobox}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t) : (\n\t\t\tmainCombobox\n\t\t);\n\t}\n}\n\nCombobox.contextType = IconSettingsContext;\nCombobox.displayName = COMBOBOX;\nCombobox.propTypes = propTypes;\nCombobox.defaultProps = defaultProps;\n\nexport default Combobox;\n"],"file":"combobox.js"}