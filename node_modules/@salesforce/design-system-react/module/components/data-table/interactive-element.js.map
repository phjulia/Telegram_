{"version":3,"sources":["../../../.tmp-es/components/data-table/interactive-element.jsx"],"names":["React","shortid","Mode","CellContext","TableContext","WrappedElement","InteractiveElement","props","elementId","generate","tableContext","activeElement","changeActiveElement","onFocus","args","node","tableHasFocus","focus","onRequestFocus","setAllowKeyboardNavigation","onOpen","onClose","cellContext","registerInteractiveElement","rowIndex","columnIndex","requestFocus","mode","ACTIONABLE","tabIndex","keyboardNavProps","allowKeyboardNavigation","bind","Component","displayName"],"mappings":"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","sourcesContent":["/* eslint-disable fp/no-rest-parameters */\nimport React from 'react';\nimport shortid from 'shortid';\nimport Mode from './private/mode';\nimport CellContext from './private/cell-context';\nimport TableContext from './private/table-context';\n\n/**\n * Wrapper for interactive elements in the table.\n *\n * The Advanced Data Table implements keyboard navigation as described in [Data Tables](https://www.lightningdesignsystem.com/components/data-tables/).\n * This wrapper controls an element's focus and `tabIndex` behavior so that it is consistent with the spec.\n *\n * The wrapped element must accept the props:\n *  `onFocus`: Callback for when the element is focused.\n *  `onRequestFocus`: Trigger to indicate that this element should be focused.\n *  `requestFocus`: This wrapper overrides the `requestFocus` prop and provides its own value.\n *  `tabIndex`: This wrapper overrides the `tabIndex` prop and provides its own value.\n */\nexport default (WrappedElement) => {\n\tclass InteractiveElement extends React.Component {\n\t\tconstructor(props) {\n\t\t\tsuper(props);\n\t\t\tthis.elementId = shortid.generate();\n\t\t}\n\n\t\tonFocus(tableContext, ...args) {\n\t\t\tif (tableContext.activeElement !== this.elementId) {\n\t\t\t\ttableContext.changeActiveElement(this.elementId);\n\t\t\t}\n\t\t\tif (this.props.onFocus) {\n\t\t\t\tthis.props.onFocus(...args);\n\t\t\t}\n\t\t}\n\n\t\tonRequestFocus(tableContext, node, ...args) {\n\t\t\tif (tableContext.tableHasFocus) {\n\t\t\t\tnode.focus();\n\t\t\t\tif (this.props.onRequestFocus) {\n\t\t\t\t\tthis.props.onRequestFocus(...args);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tonOpen(tableContext, ...args) {\n\t\t\ttableContext.setAllowKeyboardNavigation(false);\n\t\t\tif (this.props.onOpen) {\n\t\t\t\tthis.props.onOpen(...args);\n\t\t\t}\n\t\t}\n\n\t\tonClose(tableContext, ...args) {\n\t\t\ttableContext.setAllowKeyboardNavigation(true);\n\t\t\tif (this.props.onClose) {\n\t\t\t\tthis.props.onClose(...args);\n\t\t\t}\n\t\t}\n\n\t\trender() {\n\t\t\tconst { onFocus, onRequestFocus, onOpen, onClose } = this;\n\t\t\treturn (\n\t\t\t\t<TableContext.Consumer>\n\t\t\t\t\t{(tableContext) => (\n\t\t\t\t\t\t<CellContext.Consumer>\n\t\t\t\t\t\t\t{(cellContext) => {\n\t\t\t\t\t\t\t\ttableContext.registerInteractiveElement(\n\t\t\t\t\t\t\t\t\tcellContext.rowIndex,\n\t\t\t\t\t\t\t\t\tcellContext.columnIndex,\n\t\t\t\t\t\t\t\t\tthis.elementId\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tconst requestFocus =\n\t\t\t\t\t\t\t\t\ttableContext.mode === Mode.ACTIONABLE &&\n\t\t\t\t\t\t\t\t\ttableContext.activeElement === this.elementId;\n\t\t\t\t\t\t\t\tconst tabIndex =\n\t\t\t\t\t\t\t\t\ttableContext.mode === Mode.ACTIONABLE ? '0' : '-1';\n\t\t\t\t\t\t\t\tconst keyboardNavProps = tableContext.allowKeyboardNavigation\n\t\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\t\tonFocus: onFocus.bind(this, tableContext),\n\t\t\t\t\t\t\t\t\t\t\tonRequestFocus: onRequestFocus.bind(this, tableContext),\n\t\t\t\t\t\t\t\t\t\t\trequestFocus,\n\t\t\t\t\t\t\t\t\t\t\ttabIndex,\n\t\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t\t: {};\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<WrappedElement\n\t\t\t\t\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\t\t\t\t\t...this.props,\n\t\t\t\t\t\t\t\t\t\t\t...{\n\t\t\t\t\t\t\t\t\t\t\t\tonOpen: onOpen.bind(this, tableContext),\n\t\t\t\t\t\t\t\t\t\t\t\tonClose: onClose.bind(this, tableContext),\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t...keyboardNavProps,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</CellContext.Consumer>\n\t\t\t\t\t)}\n\t\t\t\t</TableContext.Consumer>\n\t\t\t);\n\t\t}\n\t}\n\tInteractiveElement.displayName = `InteractiveElement${WrappedElement.displayName}`;\n\treturn InteractiveElement;\n};\n"],"file":"interactive-element.js"}