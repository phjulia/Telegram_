{"version":3,"sources":["../../../.tmp-es/components/toast/index.jsx"],"names":["React","PropTypes","assign","classNames","EventUtil","Button","Icon","checkProps","TOAST","DOMElementFocus","componentDoc","propTypes","assistiveText","shape","closeButton","oneOfType","string","node","className","array","object","duration","number","labels","details","heading","headingLink","onClickHeadingLink","func","icon","onRequestClose","style","variant","oneOf","isRequired","defaultProps","error","info","success","warning","Toast","props","clearTimeout","timeout","toast","state","isInitialRender","storeActiveElement","focus","setState","setTimeout","onClose","returnFocusToStoredElement","content","assistiveTextVariant","defaultIcons","clonedIcon","cloneElement","containerClassName","inverse","size","saveToastRef","trappedHandler","Component","displayName"],"mappings":"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","sourcesContent":["/* Copyright (c) 2015-present, salesforce.com, inc. All rights reserved */\n/* Licensed under BSD 3-Clause - see LICENSE.txt or git.io/sfdc-license */\n\n// # Toast Component\n\n// Implements the [Toast design pattern](https://lightningdesignsystem.com/components/toasts/) in React.\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport assign from 'lodash.assign';\n\nimport classNames from '../../utilities/class-names';\nimport EventUtil from '../../utilities/event';\nimport Button from '../button';\nimport Icon from '../icon';\nimport checkProps from './check-props';\nimport { TOAST } from '../../utilities/constants';\nimport DOMElementFocus from '../../utilities/dom-element-focus';\nimport componentDoc from './component.json';\n\nconst propTypes = {\n\t/**\n\t * **Assistive text for accessibility**\n\t * This object is merged with the default props object on every render.\n\t * * `closeButton`: This is a visually hidden label for the close button.\n\t * * `error`: This is a visually hidden label to mark the toast as an error variant\n\t * * `info`: This is a visually hidden label to mark the toast as an info variant\n\t * * `success`: This is a visually hidden label to mark the toast as an success variant\n\t * * `warning`: This is a visually hidden label to mark the toast as an warning variant\n\t * _Tested with snapshot testing._\n\t */\n\tassistiveText: PropTypes.shape({\n\t\tcloseButton: PropTypes.oneOfType([PropTypes.string, PropTypes.node]),\n\t}),\n\t/**\n\t * CSS classes to be added to tag with `.slds-notify_toast`. Uses `classNames` [API](https://github.com/JedWatson/classnames).\n\t * _Tested with snapshot testing._\n\t */\n\tclassName: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.object,\n\t\tPropTypes.string,\n\t]),\n\t/**\n\t * If duration exists, the Toast will disappear after that amount of time. Time in milliseconds. _Tested with Mocha testing._\n\t */\n\tduration: PropTypes.number,\n\t/**\n\t * **Text labels for internationalization**\n\t * This object is merged with the default props object on every render.\n\t * * `details`: Secondary text below heading\n\t * * `heading`: text within heading tag\n\t * * `headingLink`: Text of link that triggers `onClickHeadingLink`. Inline links should pass a keyed array of React components into `labels.heading`.\n\t *\n\t * _Tested with snapshot testing._\n\t */\n\tlabels: PropTypes.shape({\n\t\tdetails: PropTypes.oneOfType([PropTypes.string, PropTypes.node]),\n\t\theading: PropTypes.oneOfType([PropTypes.string, PropTypes.node]),\n\t\theadingLink: PropTypes.oneOfType([PropTypes.string, PropTypes.node]),\n\t}),\n\t/**\n\t * Triggered by link. _Tested with Mocha testing._\n\t */\n\tonClickHeadingLink: PropTypes.func,\n\t/**\n\t * Icon of type `~/components/icon`. This icon will be cloned and additional props appended. The default icons are:\n\t * * info variant: `utility:info`\n\t * * error variant: `utility:error`\n\t * * success variant: `utility:success`\n\t * * warning variant: `utility:warning`\n\t *\n\t * _Tested with snapshot testing._\n\t */\n\ticon: PropTypes.node,\n\t/**\n\t * Triggered by close button. _Tested with Mocha testing._\n\t */\n\tonRequestClose: PropTypes.func,\n\t/**\n\t * Custom styles to be passed to the component. _Tested with Mocha testing._\n\t */\n\tstyle: PropTypes.object,\n\t/**\n\t * The type of Toast. _Tested with snapshot testing._\n\t */\n\tvariant: PropTypes.oneOf(['error', 'info', 'success', 'warning']).isRequired,\n};\n\nconst defaultProps = {\n\tassistiveText: {\n\t\tcloseButton: 'Close',\n\t\terror: 'error',\n\t\tinfo: 'info',\n\t\tsuccess: 'success',\n\t\twarning: 'warning',\n\t},\n\tvariant: 'info',\n};\n\n/**\n * Toast serves as a feedback & confirmation mechanism after the user takes an action. View [banner guidelines](https://www.lightningdesignsystem.com/guidelines/messaging/components/banners/).\n */\n\nclass Toast extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tisInitialRender: true,\n\t\t};\n\t\tthis.timeout = null;\n\t\tthis.toast = null;\n\n\t\t// `checkProps` issues warnings to developers about properties (similar to React's built in development tools)\n\t\tcheckProps(TOAST, props, componentDoc);\n\t}\n\n\tcomponentDidMount() {\n\t\tif (this.props.duration) {\n\t\t\tthis.timeout = setTimeout(() => {\n\t\t\t\tthis.onClose();\n\t\t\t}, this.props.duration);\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.clearTimeout();\n\t\tDOMElementFocus.returnFocusToStoredElement();\n\t}\n\n\tonClose = () => {\n\t\tthis.clearTimeout();\n\n\t\tif (this.props.onRequestClose) {\n\t\t\tthis.props.onRequestClose();\n\t\t}\n\t};\n\n\tclearTimeout = () => {\n\t\tif (this.timeout) {\n\t\t\tclearTimeout(this.timeout);\n\t\t\tthis.timeout = null;\n\t\t}\n\t};\n\n\tsaveToastRef = (toast) => {\n\t\tthis.toast = toast;\n\t\tif (this.state.isInitialRender) {\n\t\t\tDOMElementFocus.storeActiveElement();\n\t\t\tif (this.toast) {\n\t\t\t\tthis.toast.focus();\n\t\t\t}\n\t\t\tthis.setState({ isInitialRender: false });\n\t\t}\n\t};\n\n\trender() {\n\t\t// Merge objects of strings with their default object\n\t\tconst assistiveText = assign(\n\t\t\t{},\n\t\t\tdefaultProps.assistiveText,\n\t\t\tthis.props.assistiveText\n\t\t);\n\t\tconst labels = assign({}, defaultProps.labels, this.props.labels);\n\t\tconst heading = labels.heading || this.props.content; // eslint-disable-line react/prop-types\n\n\t\tconst assistiveTextVariant = {\n\t\t\tinfo: assistiveText.info,\n\t\t\tsuccess: assistiveText.success,\n\t\t\twarning: assistiveText.warning,\n\t\t\terror: assistiveText.error,\n\t\t};\n\n\t\tconst defaultIcons = {\n\t\t\tinfo: <Icon category=\"utility\" name=\"info\" />,\n\t\t\tsuccess: <Icon category=\"utility\" name=\"success\" />,\n\t\t\twarning: <Icon category=\"utility\" name=\"warning\" />,\n\t\t\terror: <Icon category=\"utility\" name=\"error\" />,\n\t\t};\n\n\t\tconst icon = this.props.icon\n\t\t\t? this.props.icon\n\t\t\t: defaultIcons[this.props.variant];\n\n\t\tconst clonedIcon = React.cloneElement(icon, {\n\t\t\tcontainerClassName: 'slds-m-right_small slds-no-flex slds-align-top',\n\t\t\tinverse: true,\n\t\t\tsize: 'small',\n\t\t});\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={classNames(\n\t\t\t\t\t'slds-notify slds-notify_toast',\n\t\t\t\t\t{\n\t\t\t\t\t\t'slds-theme_info': this.props.variant === 'info',\n\t\t\t\t\t\t'slds-theme_success': this.props.variant === 'success',\n\t\t\t\t\t\t'slds-theme_warning': this.props.variant === 'warning',\n\t\t\t\t\t\t'slds-theme_error': this.props.variant === 'error',\n\t\t\t\t\t},\n\t\t\t\t\tthis.props.className\n\t\t\t\t)}\n\t\t\t\tref={this.saveToastRef}\n\t\t\t\trole=\"status\"\n\t\t\t\tstyle={this.props.style}\n\t\t\t\ttabIndex={0} // eslint-disable-line jsx-a11y/no-noninteractive-tabindex\n\t\t\t>\n\t\t\t\t<span className=\"slds-assistive-text\">\n\t\t\t\t\t{assistiveTextVariant[this.props.variant]}\n\t\t\t\t</span>\n\t\t\t\t{clonedIcon}\n\t\t\t\t<div className=\"slds-notify__content\">\n\t\t\t\t\t<h2 className=\"slds-text-heading_small\">\n\t\t\t\t\t\t{heading}{' '}\n\t\t\t\t\t\t{labels.headingLink ? (\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tonClick={EventUtil.trappedHandler(\n\t\t\t\t\t\t\t\t\tthis.props.onClickHeadingLink\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\thref=\"#\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{labels.headingLink}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</h2>\n\t\t\t\t\t{labels.details ? <p>{labels.details}</p> : null}\n\t\t\t\t</div>\n\t\t\t\t<Button\n\t\t\t\t\tassistiveText={{ icon: assistiveText.closeButton }}\n\t\t\t\t\tclassName=\"slds-notify__close\"\n\t\t\t\t\ticonCategory=\"utility\"\n\t\t\t\t\ticonName=\"close\"\n\t\t\t\t\ticonSize=\"large\"\n\t\t\t\t\tinverse\n\t\t\t\t\tonClick={this.props.onRequestClose}\n\t\t\t\t\ttitle={assistiveText.closeButton}\n\t\t\t\t\tvariant=\"icon\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nToast.defaultProps = defaultProps;\nToast.displayName = TOAST;\nToast.propTypes = propTypes;\n\nexport default Toast;\n"],"file":"index.js"}